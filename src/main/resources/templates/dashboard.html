<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>대시보드</title>
    <style>
        body {
          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
          margin: 0;
          padding: 0;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          min-height: 100vh;
          color: white;
        }
        .container {
          max-width: 1200px;
          margin: 0 auto;
          padding: 20px;
        }
        .header {
          background: rgba(255, 255, 255, 0.1);
          padding: 30px;
          border-radius: 15px;
          margin-bottom: 30px;
          backdrop-filter: blur(10px);
          text-align: center;
        }
        .user-info {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          gap: 20px;
          margin-bottom: 30px;
        }
        .info-card {
          background: rgba(255, 255, 255, 0.1);
          padding: 25px;
          border-radius: 15px;
          backdrop-filter: blur(10px);
        }
        .info-card h3 {
          margin-top: 0;
          color: #fff;
          border-bottom: 2px solid rgba(255, 255, 255, 0.3);
          padding-bottom: 10px;
        }
        .info-item {
          display: flex;
          justify-content: space-between;
          margin-bottom: 10px;
          padding: 5px 0;
        }
        .info-label {
          font-weight: bold;
        }
        .info-value {
          color: #e0e0e0;
        }
        .authorities {
          display: flex;
          flex-wrap: wrap;
          gap: 8px;
        }
        .authority-badge {
          background: rgba(76, 175, 80, 0.8);
          padding: 4px 12px;
          border-radius: 20px;
          font-size: 12px;
          font-weight: bold;
        }
        .navigation {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 15px;
          margin-bottom: 30px;
        }
        .nav-button {
          display: block;
          padding: 15px 20px;
          background: rgba(255, 255, 255, 0.2);
          color: white;
          text-decoration: none;
          border-radius: 10px;
          text-align: center;
          transition: all 0.3s ease;
          border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .nav-button:hover {
          background: rgba(255, 255, 255, 0.3);
          transform: translateY(-2px);
        }
        .nav-button.admin {
          background: rgba(244, 67, 54, 0.8);
        }
        .nav-button.manager {
          background: rgba(255, 152, 0, 0.8);
        }
        .logout-section {
          text-align: center;
          margin-top: 30px;
        }
        .logout-button {
          padding: 12px 30px;
          background: rgba(244, 67, 54, 0.8);
          color: white;
          border: none;
          border-radius: 8px;
          cursor: pointer;
          font-size: 16px;
          transition: all 0.3s ease;
        }
        .logout-button:hover {
          background: rgba(244, 67, 54, 1);
          transform: translateY(-2px);
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>📊 대시보드</h1>
        <p>안녕하세요, <span th:text="${fullName}">사용자</span>님!</p>
    </div>

    <div class="user-info">
        <!-- 사용자 기본 정보 -->
        <div class="info-card">
            <h3>👤 사용자 정보</h3>
            <div class="info-item">
                <span class="info-label">사용자명:</span>
                <span class="info-value" th:text="${username}">username</span>
            </div>
            <div class="info-item">
                <span class="info-label">이메일:</span>
                <span class="info-value" th:text="${email}">email@example.com</span>
            </div>
            <div class="info-item">
                <span class="info-label">이름:</span>
                <span class="info-value" th:text="${fullName}">Full Name</span>
            </div>
            <div class="info-item">
                <span class="info-label">사용자 ID:</span>
                <span class="info-value" th:text="${user.id}">1</span>
            </div>
        </div>

        <!-- 계정 상태 정보 -->
        <div class="info-card">
            <h3>🔒 계정 상태</h3>
            <div class="info-item">
                <span class="info-label">활성화:</span>
                <span class="info-value" th:text="${user.enabled} ? '✅ 활성화됨' : '❌ 비활성화됨'">상태</span>
            </div>
            <div class="info-item">
                <span class="info-label">계정 만료:</span>
                <span class="info-value" th:text="${user.accountNonExpired} ? '✅ 만료되지 않음' : '❌ 만료됨'">상태</span>
            </div>
            <div class="info-item">
                <span class="info-label">계정 잠금:</span>
                <span class="info-value" th:text="${user.accountNonLocked} ? '✅ 잠금되지 않음' : '❌ 잠금됨'">상태</span>
            </div>
            <div class="info-item">
                <span class="info-label">자격증명 만료:</span>
                <span class="info-value" th:text="${user.credentialsNonExpired} ? '✅ 만료되지 않음' : '❌ 만료됨'">상태</span>
            </div>
        </div>

        <!-- 권한 정보 -->
        <div class="info-card">
            <h3>🛡️ 권한 정보</h3>
            <div class="info-item">
                <span class="info-label">보유 권한:</span>
                <div class="authorities">
                    <span class="authority-badge" th:each="authority : ${authorities}" th:text="${authority}">ROLE_USER</span>
                </div>
            </div>
            <div class="info-item" style="margin-top: 15px;">
                <span class="info-label">역할:</span>
                <div class="authorities">
                    <span class="authority-badge" th:each="role : ${user.roles}" th:text="${role}">USER</span>
                </div>
            </div>
        </div>

        <!-- 시간 정보 -->
        <div class="info-card">
            <h3>⏰ 시간 정보</h3>
            <div class="info-item">
                <span class="info-label">계정 생성일:</span>
                <span class="info-value" th:text="${#temporals.format(user.createdAt, 'yyyy-MM-dd HH:mm')}">생성일</span>
            </div>
            <div class="info-item">
                <span class="info-label">마지막 로그인:</span>
                <span class="info-value" th:text="${user.lastLoginAt != null ? #temporals.format(user.lastLoginAt, 'yyyy-MM-dd HH:mm') : '정보 없음'}">로그인 시간</span>
            </div>
        </div>
    </div>

    <!-- 네비게이션 -->
    <div class="navigation">
        <a href="/profile" class="nav-button">📋 프로필</a>
        <a sec:authorize="hasRole('MANAGER')" href="/manager" class="nav-button manager">👨‍💼 매니저</a>
        <a sec:authorize="hasRole('ADMIN')" href="/admin" class="nav-button admin">👨‍💻 관리자</a>
        <a href="/" class="nav-button">🏠 홈</a>
    </div>

    <!-- 로그아웃 -->
    <div class="logout-section">
        <form th:action="@{/logout}" method="post">
            <button type="submit" class="logout-button">🚪 로그아웃</button>
        </form>
    </div>
</div>
</body>
</html>